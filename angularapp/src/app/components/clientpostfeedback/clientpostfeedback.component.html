<ng-container *ngIf="userRole === 'Client'">
  <app-clientnav></app-clientnav>
</ng-container>

<ng-container *ngIf="userRole === 'Manager'">
  <app-managernav></app-managernav>
</ng-container>

<div class="form-container">
  <h2>Add Feedback</h2>

  <form [formGroup]="feedbackForm" (ngSubmit)="onSubmit()">
    <!-- Feedback Text -->
    <label for="feedbackText">Feedback</label>
    <textarea id="feedbackText" formControlName="feedbackText" rows="4" placeholder="Write your feedback..."
      required></textarea>
    <div class="error" *ngIf="(f.feedbackText.touched || submitted) && f.feedbackText.errors">
      <span *ngIf="f.feedbackText.errors?.required">Feedback is required.</span>
      <span *ngIf="f.feedbackText.errors?.minlength">Minimum 10 characters.</span>
    </div>

    <!-- Category -->
    <label for="category">Category</label>
    <select id="category" formControlName="category" required>
      <option value="">Select Category</option>
      <option value="Authentication">Authentication</option>
      <option value="UI Bug">UI Bug</option>
      <option value="Performance">Performance</option>
      <option value="Other">Other</option>
    </select>
    <div class="error" *ngIf="(f.category.touched || submitted) && f.category.errors">
      <span *ngIf="f.category.errors?.required">Category is required.</span>
    </div>

    <!-- Rating (as select) -->
    <label for="rating">Rating</label>
    <select id="rating" formControlName="rating" required>
      <option value="">Select Rating</option>
      <option *ngFor="let r of [1,2,3,4,5]" [value]="r">{{ r }}</option>
    </select>
    <div class="error" *ngIf="(f.rating.touched || submitted) && f.rating.errors">
      <span *ngIf="f.rating.errors?.required">Rating is required.</span>
    </div>

    <!-- Submit Button -->
    <div class="btn-div">
      <button type="submit" class="submit-button" [disabled]="feedbackForm.invalid || isSubmitting">
        {{ isSubmitting ? 'Submittingâ€¦' : 'Submit' }}
      </button>
    </div>
  </form>
</div>

<!-- Success Modal -->
<div class="modal" *ngIf="showModal">
  <div class="modal-content">
    <h3>{{ modalText || 'Feedback submitted successfully!' }}</h3>
    <button class="modal-ok-button" (click)="closeModalAndReset()">OK</button>
  </div>
</div>